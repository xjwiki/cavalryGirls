/** xjDir(侧边目录列表) | V0.2.1 | Apache Licence 2.0 | 2018-2025 © XJ.Chen | https://github.com/xjZone/xjDir */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b(require("jquery")):(Boolean(a)||(a=self),b(a.jQuery)):define(function(a){b(a("jquery"))})}(this,function(a){"use strict";var h,i,j,k,l,m,n,o,p,q,r,s,u,v,w,x,y,z,b="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,c=function(){},d="0.2.1",e="Dir",f={selector:".xjDir",autoCreate:!0,dispatchTime:"ready"},g={manual:!1,size:"md",color:"default",border:"right",spreadDuration:250,spreadEasing:"swing",activeSpread:!0,singleSpread:!1,foldedMode:!1,foldedQuery:!1,foldedMasker:!0,scrollActive:!0,scrollAlign:"middle",scrollMust:!1,scrollOffset:0,createRipple:!0,hoverUnfold:!1,keepScroll:!0,classString:"",styleObject:null,maskerClass:"",maskerStyle:null,createBefore:c,createAfter:c,foldedCallback:c,unfoldCallback:c,spreadCallback:c,shrinkCallback:c,anchorCallback:c,loadedCallback:c,autoDestroyTime:6e4,destroyCallback:c};void 0===b.xj&&(b.xj={}),void 0===b.xj[e]&&(b.xj[e]={}),void 0===b.xj[e].return&&(b.xj[e].return={}),void 0===b.xj[e].config&&(b.xj[e].config={}),void 0===b.xj[e].option&&(b.xj[e].option={}),b.xj[e].config[d]&&a.extend(f,b.xj[e].config[d]),b.xj[e].option[d]&&a.extend(g,b.xj[e].option[d]),h=b,i=h.document,j=i.documentElement,k=i.body,l=a(h),m=a(i),n=a(j),o=a(k),p=!1,q="ontouchstart"in h,r=void 0===document.documentMode?!1:!0,s="xjDir-",u=s+"spread",v=s+"active",w=s+"folded",x=s+"unfold",y=s+"loading",z=s+"disabled",a.fn.xjDir=function(f){var C,D,E,G,H,I,J,K,L,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,t=this.first(),A=t.get(0),B=t.attr("xj"+e+"Id");return B?b.xj[e].return[B]:(void 0===f&&(f={}),f=a.extend({},g,f),C=t.attr("xj"+e),C&&a.extend(f,eval("("+C+")")),p===!0&&f.manual===!0?void 0:(null===k&&(k=i.body,o=a(k)),null===j&&(j=i.documentElement,n=a(j)),D=Date.now()+"_"+String(Math.random()).slice(2,12),E="."+D,t.attr("xjDirId",D),G=t.parent(".xjScroll-main").closest(".xjScroll").attr("xjScrollId"),H=void 0===G?null:b.xj.Scroll.return[G],I=null===H?t:H.wrap,J=I.get(0),K=t.children("ul").first(),L=K.get(0),f.manual,N=f.size,O=f.color,P=f.border,Q=f.spreadDuration,R=f.spreadEasing,S=f.activeSpread,T=f.singleSpread,U=f.foldedMode,V=f.foldedQuery,W=f.foldedMasker,X=f.scrollActive,Y=f.scrollAlign,Z=f.scrollMust,$=f.scrollOffset,_=f.createRipple,ab=f.hoverUnfold,bb=f.keepScroll,cb=f.classString,db=f.styleObject,eb=f.maskerClass,fb=f.maskerStyle,gb=f.createBefore,hb=f.createAfter,ib=f.foldedCallback,jb=f.unfoldCallback,kb=f.spreadCallback,lb=f.shrinkCallback,mb=f.anchorCallback,nb=f.loadedCallback,ob=f.autoDestroyTime,pb=f.destroyCallback,"md"!==N&&t.addClass(s+N),"default"!==O&&t.addClass(s+O),"right"!==P&&t.addClass(s+"border-"+P),""!==cb&&t.addClass(cb),null!==db&&t.css(db),qb=a('<div class="xjDir-masker"></div>'),null!==fb&&qb.css(fb),""!==eb&&qb.addClass(eb),250!==Q&&t.prepend('<style>.xjDir[xjDirId="'+D+'"] .xjDir-sign::before,'+'.xjDir[xjDirId="'+D+'"] .xjDir-sign::after{transition:transform '+Q+"ms;}"+"</style>"),rb=function(){return K.find("li").not(".xjDir-divide")},sb=function(a){var b,c;W&&(b=t.css("zIndex"),qb.css("zIndex",b-4),c=t.closest(".xjScroll").not("body"),0!==c.length&&c.css("zIndex",b),a===!0?o.append(qb):qb.remove())},tb=0,ub=0,vb=function(){xb.unfold(!0)},wb=function(a){var b=r===!1?a.relatedTarget:i.activeElement;null!==b&&a.currentTarget.contains(b)===!1&&xb.unfold(!1)},xb={id:D,version:d,self:t,that:t},xb.destroy=function(a){return pb(xb)===!1?!1:(delete b.xj[e].return[D],[l,m,n,o].forEach(function(a){a.off(E)}),a!==!1?t.remove():t.off(E).find("li > ul").off(E),(null===H?t:H.self).get(0).removeEventListener("focus",vb,!0),(null===H?t:H.self).get(0).removeEventListener("blur",wb,!0),V!==!1&&mediaQueryOffchange(zb,yb),void 0!==zb&&(zb=void 0),null!==H&&H.self.off(E),sb(!1),void 0)},xb.reinit=function(){K.find("li > ul").each(function(){a(this).off("scroll"+E).on("scroll"+E,function(){this.scrollTop=0})}),_===!0&&K.find("li").children("a").addClass("xj-ripple"),K.find("li.xjDir-loading").addClass(z),K.find("li.xjDir-loading").children("a").each(function(){var b=this,c=a(this),d=c.attr("tabIndex");b.hasAttribute("tabIndex")===!0&&c.attr("xjDirIndex",d),c.attr("tabIndex","-1")}),K.find("li.xjDir-disabled").not(".xjDir-loading").children("a").each(function(b,c){var f,d=c,e=a(c);e.children(".xjDir-sign").length>0||(f=e.attr("tabIndex"),d.hasAttribute("tabIndex")===!0&&e.attr("xjDirIndex",f),e.attr("tabIndex","-1"))})},xb.spread=function(b,d){var e,f,g,h,i,j,k,l,m;return 0===arguments.length?K.find(".xjDir-spread"):(e=a(b).closest("li"),void 0===d?e.hasClass(u):("toggle"===d&&(d=e.hasClass(u)===!0?!1:!0),f=e.children("ul"),f.stop(!0).css("display","block"),e[d?"addClass":"removeClass"](u),d===!1?f.animate({height:0},Q,R,function(){f.css({display:"",height:""}),lb!==c&&lb(xb,e)}):(g=e.parent("ul"),h=g.parent("li"),"none"===g.css("display")?xb.spread(h,!0):(i=f.height(),j=f.css("height","auto").height(),i===j?f.css("height",0):f.css("height",i),f.animate({height:j},Q,R,function(){f.css({display:"",height:""}),kb!==c&&kb(xb,e)}),T!==!1&&(k=e.find("li"),l=e.parentsUntil(K).filter("li"),m=rb().not(e).not(l).not(k),m.filter(".xjDir-spread").each(function(a,b){xb.spread(b,!1)})),void 0))))},xb.active=function(b,c){var d,e;return 0===arguments.length?K.find(".xjDir-active"):(d=a(b).closest("li"),void 0===c?d.hasClass(v):("toggle"===c&&(c=d.hasClass(v)===!0?!1:!0),c===!1?(d.parentsUntil(K).filter("li").removeClass(v),d.removeClass(v),void 0):(e=d.parentsUntil(K).filter("li"),K.find(".xjDir-active").not(e).removeClass(v),d.addClass(v),e.addClass(v),void 0)))},xb.loading=function(b,c){if(0===arguments.length)return K.find(".xjDir-loading");var d=a(b).closest("li");return void 0===c?d.hasClass(y):("toggle"===c&&(c=d.hasClass(y)===!0?!1:!0),c===!0?(d.addClass(y+" "+z),a.each(d.children("a"),function(b,c){var d=c,e=a(c),f=e.attr("tabIndex");d.hasAttribute("tabIndex")===!0&&d.setAttribute("xjDirIndex",f),e.attr("tabIndex","-1")})):(d.removeClass(y+" "+z),a.each(d.children("a"),function(b,c){var e=a(c),f=e.attr("xjDirIndex");void 0===f?e.removeAttr("tabIndex"):e.attr("tabIndex",xjDirIndex),e.removeAttr("xjDirIndex")})))},xb.disabled=function(b,c){if(0===arguments.length)return K.find(".xjDir-disabled");var d=a(b).closest("li");return void 0===c?d.hasClass(z):("toggle"===c&&(c=d.hasClass(z)===!0?!1:!0),c===!0?(d.addClass(z),d.children("a").each(function(b,c){var d=c,e=a(c),f=e.attr("tabIndex");e.children(".xjDir-sign").length>0||(d.hasAttribute("tabIndex")===!0&&e.attr("xjDirIndex",f),e.attr("tabIndex","-1"))})):(d.removeClass(z),d.children("a").each(function(b,c){var e=a(c),f=e.attr("xjDirIndex");void 0===f?e.removeAttr("tabIndex"):e.attr("tabIndex",xjDirIndex),e.removeAttr("xjDirIndex")})))},xb.spreadAll=function(b){if(0===arguments.length)return K.find("li.xjDir-spread").length>=K.find("li > ul").length?!0:!1;var c=a('<style>.xjDir[xjDirId="'+D+'"] .xjDir-sign::before, .xjDir[xjDirId="'+D+'"] .xjDir-sign::after{transition:none;}</style>');t.append(c),rb().each(function(){var c=a(this),d=c.children("ul");0!==d.length&&(d.get(0).clientHeight,b===!1?c.removeClass(u):b===!0?c.addClass(u):c.toggleClass(u))}),c.remove()},xb.scrollActive=function(){var g,h,i,j,k,l,m,n,o,p,q,r,e=xb.active(),f=e.last()[0];if(!(e.length<=0)){if(t.hasClass(w)===!0&&t.hasClass(x)===!1?f=e.first()[0]:e.each(function(){var b=a(this),c=b.parent("ul");"none"!==c.css("display")&&(f=b.get(0))}),null===H){if(A.clientHeight>=L.scrollHeight)return}else if(H.maxScrollX()<=0)return;if(g=null===H?t:H.wrap,h=g.get(0),i=Z,j=Y,k=$,Array.prototype.slice.apply(arguments).forEach(function(a){"boolean"==typeof a?i=a:"string"==typeof a?j=a:"number"==typeof a&&(k=a)}),l=h.clientHeight,m=f.clientHeight,n=h.getBoundingClientRect().top,o=f.getBoundingClientRect().top,p=o-n,q=h.scrollTop,r=void 0,p>=0&&l-m>=p&&i===!1)return void 0;r=q+p,"middle"===j?r=r-l/2+m/2:"bottom"===j&&(r=r-l+m),h.scrollTop=r+k,null!==H&&H.scroll()}},xb.folded=function(a){var b=null===H?t:H.wrap,d=b.get(0),e=t.hasClass(w),f=null===H?t:H.self;return 0===arguments.length?e:("toggle"===a&&(a=e===!0?!1:!0),a===!0&&e===!1&&(q===!1&&ab===!0&&[["mouseenter",!0],["mouseleave",!1]].forEach(function(a){f.on(a[0]+E,function(){xb.unfold(a[1])})}),f.get(0).addEventListener("focus",vb,!0),f.get(0).addEventListener("blur",wb,!0),t.on("click"+E+"folded",function(){xb.unfold(!0)}),m.on("click"+E,function(a){A.contains(a.target)!==!0&&(H&&H.self[0].contains(a.target)===!0||xb.unfold(!1))}),bb===!0&&(ub=d.scrollTop),t.removeClass(x),t.addClass(w),bb===!0&&(d.scrollTop=tb),ib!==c&&ib(xb)),a===!1&&e===!0&&(q===!1&&ab===!0&&f.off("mouseenter"+E),q===!1&&ab===!0&&f.off("mouseleave"+E),f.get(0).removeEventListener("focus",vb,!0),f.get(0).removeEventListener("blur",wb,!0),t.off("click"+E+"folded"),m.off("click"+E),bb===!0&&(tb=d.scrollTop),t.removeClass(w),t.removeClass(x),bb===!0&&(d.scrollTop=ub),jb!==c&&jb(xb)),void 0)},xb.unfold=function(a){return void 0===a?t.hasClass(x):("toggle"===a&&(a=t.hasClass(x)===!0?!1:!0),a===!0&&t.hasClass(w)===!0&&t.hasClass(x)===!1&&(bb===!0&&(tb=J.scrollTop),t.addClass(x),bb===!0&&(J.scrollTop=ub),jb!==c&&jb(xb),sb(!0)),a===!1&&t.hasClass(w)===!0&&t.hasClass(x)===!0&&(bb===!0&&(ub=J.scrollTop),t.removeClass(x),bb===!0&&(J.scrollTop=tb),ib!==c&&ib(xb),sb(!1)),void 0)},gb!==c&&gb(xb),xb.reinit(),function(){U!==!1&&(t.removeClass(w),t.removeClass(x),xb.folded(!0))}(),function(){var a=xb.active();return 0===a.length?"0":(xb.active(a.last(),!0),S===!0&&(T===!0&&K.find(".xjDir-spread").removeClass(u),a.last().parentsUntil(K).filter("li").addClass(u)),X===!0&&xb.scrollActive(),void 0)}(),yb=c,zb=void 0,V!==!1&&(yb=function(a){if(a.matches===!0){if(xb.folded()===!0)return;return xb.folded(!0),void 0}if(a.matches===!1){if(xb.folded()===!1)return;return xb.folded(!1),void 0}},zb=h.matchMedia(V),mediaQueryOnchange(zb,yb)),t.on("click"+E,"a",function(b){var h,d=a(this),e=d.parent("li"),f=e.children("ul"),g=d.children(".xjDir-sign");return 0!==e.closest("."+z).length&&0===g.length?b.preventDefault():e.hasClass(y)===!0?b.preventDefault():0!==g.length?0===f.length?(nb!==c&&nb(xb,e),xb.loading(e,!0)):(e.hasClass(u)===!0?xb.spread(e,!1):xb.spread(e,!0),void 0):(xb.active(e,!0),mb!==c&&(h=mb(xb,e)),h===!1&&b.preventDefault(),void 0)}),Ab=void 0,-1!==ob&&(Ab=setInterval(function(){return k.contains(A)===!0?"still exist":(xb.destroy()!==!1&&clearInterval(Ab),void 0)},ob)),hb!==c&&hb(xb),b.xj[e].return[D]=xb))},a.xjDir=function(b){void 0===b&&(b={}),b=a.extend({},g,b);var c=[];return a(f.selector).not("[xjDirId]").each(function(){c.push(a(this).xjDir(b))}),c},function(){function b(){p=!0,a.xjDir(),p=!1}var c=a('script[src*="xjDir"]').attr("xjDir-manual");if(void 0!==c&&(f.autoCreate=!1),f.autoCreate!==!1)switch(f.dispatchTime){case"ready":a.isReady===!0?b():a(function(){b()});break;case"load":l.one("load",b);break;case"now":b()}}()});
